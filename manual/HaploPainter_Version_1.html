<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <link href="../home/hp.css" rel="stylesheet" type="text/css"/>
    <link href="../home/hp.ico" rel="icon" type="image/x-icon"/>
    <title>HaploPainter Version 1</title>
    <style>
<!--
body {
	font-size:12.0pt;
	font-family:Arial;
	width:96em;
}
/* Style Definitions */
h1
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:Arial;
	font-weight:bold;
	clear:both;}
h2
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;
	clear:both;}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:Arial;
	font-weight:bold;
	clear:both;}
h4
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:Arial;
	font-weight:bold;
	clear:both;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:Arial;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:12.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:Arial;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:Arial;}
a:link
	{color:blue;
	text-decoration:underline;}
a:visited
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	text-align:justify;
	clear:both;}
/* List Definitions */
ol
	{margin-top:0cm;
	margin-bottom:0cm;}
ul
	{margin-top:0cm;
	margin-bottom:0cm;}
figure
	{float:left;
	text-align:center;}
figcaption
	{font-size:10.0pt;
	font-weight:bold;
	text-align:center;}
table
	{border-collapse:collapse;
	border:none;}
td
	{padding:0cm 6pt 0cm 6pt;
	vertical-align:top;}
tr, td
	{border:none;
	border-bottom:solid black 1.0pt;
	}
tr:first-child td
	{border-top:solid black 1.5pt;
	border-left:none;
	border-bottom:solid black 1.0pt;
	border-right:none;}
tr:last-child td
	{border:none;
	border-bottom:solid black 1.5pt;}
-->
    </style>
  </head>
  <body>
    <div id="container">
      <div id="header"><a href="../home/index.html"><img src="../home/hp-logo.png" alt="haplopainter-logo"/></a></div>
      <div id="menu">
	<table>
	  <tr>
	    <td><a href="../home/index.html">Home</a></td>
	    <td><a href="../home/about.html">About</a></td>
	    <td><a href="HaploPainter_Version_1.html" class="current">Manual</a></td>
	    <td><a href="../screenshots/screenshots.html">Screenshots</a></td>
	    <td><a href="../examples/pedigrees.html">Pedigrees</a></td>
	    <td><a href="../home/links.html">Links</a></td>
	  </tr>
	</table>
      </div>
      <div id="content">
	<h1>HaploPainter Online Manual</h1>
	<h2>Version 1.0</h2>
	<h2>Index</h2>
	<p class="MsoToc1"><a href="#_Toc211847756">How to start</a></p>
	<p class="MsoToc1"><a href="#_Toc211847757">Algorithms, best practice and limitations</a></p>
	<p class="MsoToc1"><a href="#_Toc211847758">Installation</a></p>
	<p class="MsoToc2"><a href="#_Toc211847759">Run from source files &ndash; Windows</a></p>
	<p class="MsoToc3"><a href="#_Toc211847760">Installing Perl</a></p>
	<p class="MsoToc3"><a href="#_Toc211847761">Installing GTK+ runtime libraries</a></p>
	<p class="MsoToc3"><a href="#_Toc211847762">Installing compulsory missing Perl modules</a></p>
	<p class="MsoToc3"><a href="#_Toc211847763">Installing optional missing Perl modules for database support</a></p>
	<p class="MsoToc2"><a href="#_Toc211847764">Other operating systems</a></p>
	<p class="MsoToc1"><a href="#_Toc211847765">Data import</a></p>
	<p class="MsoToc2"><a href="#_Toc211847766">Import pedigrees</a></p>
	<p class="MsoToc3"><a href="#_Toc211847767">LINKAGE</a></p>
	<p class="MsoToc3"><a href="#_Toc211847768">CSV</a></p>
	<p class="MsoToc3"><a href="#_Toc211847769">Database</a></p>
	<p class="MsoToc2"><a href="#_Toc211847770">Import haplotypes</a></p>
	<p class="MsoToc3"><a href="#_Toc211847771">Some tips for interpreting haplotypes</a></p>
	<p class="MsoToc2"><a href="#_Toc211847772">Import marker maps</a></p>
	<p class="MsoToc1"><a href="#_Toc211847773">Data export and publishing tips</a></p>
	<p class="MsoToc2"><a href="#_Toc211847774">Vector graphics</a></p>
	<p class="MsoToc3"><a href="#_Toc211847775">SVG</a></p>
	<p class="MsoToc3"><a href="#_Toc211847776">PostScript</a></p>
	<p class="MsoToc3"><a href="#_Toc211847777">PDF</a></p>
	<p class="MsoToc2"><a href="#_Toc211847778">Bitmap graphics</a></p>
	<p class="MsoToc3"><a href="#_Toc211847779">PNG</a></p>
	<p class="MsoToc2"><a href="#_Toc211847780">Flat file</a></p>
	<p class="MsoToc3"><a href="#_Toc211847781">CSV</a></p>
	<p class="MsoToc1"><a href="#_Toc211847782">Encoding and Unicode support</a></p>
	<p class="MsoToc1"><a href="#_Toc211847783">Working with pedigrees</a></p>
	<p class="MsoToc2"><a href="#_Toc211847784">Navigation</a></p>
	<p class="MsoToc3"><a href="#_Toc21184778a">Redrawing pedigrees</a></p>
	<p class="MsoToc3"><a href="#_Toc21184778b">Changing individual settings</a></p>
	<p class="MsoToc2"><a href="#_Toc211847785">Building and extending pedigrees with the graphical user interface</a></p>
	<p class="MsoToc3"><a href="#_Toc211847786">New pedigrees</a></p>
	<p class="MsoToc3"><a href="#_Toc211847787">Delete individuals</a></p>
	<p class="MsoToc3"><a href="#_Toc211847788">Add siblings</a></p>
	<p class="MsoToc3"><a href="#_Toc211847789">Add parents</a></p>
	<p class="MsoToc3"><a href="#_Toc211847790">Add mate &amp; offspring</a></p>
	<p class="MsoToc3"><a href="#_Toc211847791">Consanguinity settings</a></p>
	<p class="MsoToc3"><a href="#_Toc211847792">Twin setting</a></p>
	<p class="MsoToc3"><a href="#_Toc211847793">Loop breaking</a></p>
	<p class="MsoToc3"><a href="#_Toc211847794">Clear families</a></p>
	<p class="MsoToc1"><a href="#_Toc211847795">The configuration menu</a></p>
	<p class="MsoToc2"><a href="#_Toc211847796">Hap style</a></p>
	<p class="MsoToc2"><a href="#_Toc211847797">Hap show</a></p>
	<p class="MsoToc2"><a href="#_Toc211847798">Hap color &amp; font</a></p>
	<p class="MsoToc2"><a href="#_Toc211847799">Hap region</a></p>
	<p class="MsoToc2"><a href="#_Toc211847800">Ped style</a></p>
	<p class="MsoToc2"><a href="#_Toc211847801">Ped color</a></p>
	<p class="MsoToc2"><a href="#_Toc211847802">Ped &amp; case info</a></p>
	<p class="MsoToc1"><a href="#_Toc211847803">Page settings</a></p>
	<p class="MsoToc1"><a href="#_Toc211847804">Show grid</a></p>
	<p class="MsoToc1"><a href="#_Toc211847805">Storing and restoring defaults</a></p>
	<p class="MsoToc1"><a href="#_Toc211847806">Command line mode</a></p>
	<h1><a name="_Toc211847756">How to start</a></h1>
	<p>
	  A good way to start is to prepare a pedigree file in linkage
	  format. This format is very simple and can easily be
	  generated by any text editor. Alternatively you may prepare
	  data in a HaploPainter&rsquo;s specific input format (CSV)
	  or query a database. They allow you to import further
	  individual specific details. After you imported one or more
	  pedigrees, HaploPainter will draw them &ndash; randomly
	  placing individuals while minimizing line crossings.
	</p>
	<p>
	  During the process of pedigree calculation HaploPainter not
	  accepts key input. In the right part of the window some
	  information about the current calculation status is
	  displayed. The example figure below tells you that
	  HaploPainter has finished the calculation No.12, found 5
	  crossings there and that the best pedigree contains 1
	  crossing.
	</p>
	<figure><img width="224" height="32" src="HaploPainter_Version_1_files/image001.jpg"/></figure>
	<p>
	  If you don&rsquo;t like the result, you always can ask
	  HaploPainter to redraw the pedigree by pressing F5. Most
	  changes in the pedigree will be retained until you press
	  this button.
	</p>
	<p>
	  In order to attach haplotype data from other linkage
	  programs (Merlin, Simwalk2, Genehunter, Allegro) you can
	  import those files after you have been loaded pedigree
	  data. Again the haplotype file can consist of data of more
	  then one family. The last step would be the import of
	  mapping data &ndash; replacing marker names and coordinates.
	</p>
	<p>
	  Since version 1.0l, HaploPainter changed the way in which
	  imported data are handled. If you choose to import pedigree
	  data, HaploPainter will attach new pedigrees to existing one
	  and replace pedigrees with the same family
	  identifier. Haplotype data are scanned for family
	  identifiers and will be imported only if they match existing
	  pedigrees. Mapping data can be imported for specific
	  families or for all families depending on the setting of the
	  &ldquo;Global map import&rdquo; checkbox.
	</p>
	<p>
	  HaploPainter will give you plenty of options to modify the
	  drawing style. You can change it in the
	  &ldquo;Configuration&rdquo; menu, available form the
	  &ldquo;Option&rdquo; menu or context menu (right mouse
	  bottom). One of the interesting options with respect to
	  haplotype drawing is the ability to manually select which
	  marker should be drawn or not. This is very useful for
	  &ldquo;long&rdquo; haplotypes, such as obtained from genome
	  scans with high-density marker panels of many thousands of
	  single nucleotide polymorphisms (SNPs), which thus can be
	  reduced to a human readable size. Any part of the haplotype
	  can be annotated for any individual by using one or more
	  text boxes, for instance if you wish to draw attention to
	  regions of interest like recombination events.
	</p>
	<p>
	  If you choose &ldquo;Save&rdquo; or &ldquo;Save as&rdquo;
	  from the File menu, HaploPainter saves the complete current
	  drawing status of all families and all modifications you
	  made after import of data. You can restore this state by
	  choosing &ldquo;Open&rdquo; from the &ldquo;File&rdquo;
	  menu. The &ldquo;Save&rdquo; function overlaps with other
	  export functions which produce ether images (PS, PDF, PNG,
	  SVG) or LINKAGE like text files (CSV).
	</p>
	<h1><a name="_Toc211847757">Algorithms, best practice and limitations</a></h1>
	<p>
	  The problem with crossing free node placement is that even
	  if you find an intelligent way to build the pedigree from
	  scratch, the calculation time for all possible combinations
	  increases rapidly with the number of nodes. HaploPainter is
	  programmed in Perl &ndash; a computer language which is not
	  known to be the fastest, but even if you would do it in
	  other languages, big families would tax your patience
	  rapidly.
	</p>
	<p>
	  For this reason HaploPainter pursues a heuristic
	  strategy. Instead of trying every possible combination, it
	  places individuals of a sibling group randomly a fixed
	  number of times. The very first step is that HaploPainter
	  looks for founder couples and the generation they
	  occur. Those founder couples again are placed randomly
	  between sibling groups of that generation.
	</p>
	<p>
	  For the most common used pedigrees in the field of linkage
	  this approach works well so far. While large but acyclic
	  pedigrees make no problems, big families with many loops
	  will bring HaploPainter to its knees. Because of this
	  limitation HaploPainter decides to break all loops during
	  import of pedigrees &ndash; if your pedigree contains more
	  than three of them. You still can change this behavior later
	  with the &ldquo;Breaking loop&rdquo; option allowing you to
	  decide yourself which loop should be broken or not.
	</p>
	<p>
	  However, for the majority of pedigrees HaploPainter can find
	  crossing free solutions or at least good starting points to
	  correct them manually with the graphical user interface. The
	  GUI has almost no limitations in the placement of individual
	  nodes. Connecting lines are still drawn automatically, so
	  you can do it quickly.
	</p>
	<h1><a name="_Toc211847758">Installation</a></h1>
	<p>
	  For some systems, HaploPainter is available as perlapp
	  generated binary. As HaploPainter depends of numerous
	  libraries (GTK+, Cairo and Glib) and linking of all these
	  libraries in one file would lead to significant increase in
	  start time, they are provided as libraries with HaploPainter
	  binary. The only thing to consider is to keep the libraries
	  and HaploPainter together or to put the libraries on the
	  system <code>PATH</code>. If those binaries are not
	  available from the download page for your system, you still
	  could start the program from the source code file. This is a
	  file ending with &ldquo;<code>.pl</code>&rdquo; The program
	  language Perl is available for nearly all computer systems
	  and with a bit of knowledge, patience and expert help you
	  can run HaploPainter from source code files on every
	  computer system. The procedures differ between systems
	  &ndash; the procedure for Windows is described below.
	</p>
	<p>
	  In order to connect HaploPainter to an Oracle database you
	  also must install the appropriate drivers and the Oracle
	  client. It also may be necessary to set
	  the <code>ORACLE_HOME</code> and <code>NLS_LANG</code>
	  environment variables.
	</p>
	<h2><a name="_Toc211847759">Run from source files &ndash; Windows</a></h2>
	<h3><a name="_Toc211847760">Installing Perl</a></h3>
	<p>
	  Download and install the latest version of Perl for Windows
	  from <a href="http://www.activestate.com/activeperl/downloads">ActiveState</a>
	</p>
	<h3><a name="_Toc211847761">Installing GTK+ runtime libraries</a></h3>
	<p>
	  HaploPainter uses Cairo and Pango for the creation of
	  exported image formats. All of the precompiled libraries you
	  will need are included in the GTK+ package. In order to use
	  these libraries, download and install the all-in-one-bundle
	  for Windows from
	  <a href="http://www.gtk.org/download">The GTK+ Project</a>
	  and don&rsquo;t forget to set the system path variable to
	  point at the <code>bin</code> folder from GTK+ or place the
	  Perl program inside the <code>bin</code> folder!
	</p>
	<h3><a name="_Toc211847762">Installing compulsory missing Perl modules</a></h3>
	<p>
	  Perl modules from ActiveState&rsquo;s Perl are added via
	  Perl Package Manager &ndash; ppm. Type the following
	  commands into the console window.
	</p>
<pre>&gt; ppm install Tk
&gt; ppm install Sort-Naturally
&gt; ppm rep add sisyphusion http://www.sisyphusion.tk/ppm
&gt; ppm install Gtk2 --force</pre>
	<p>
	 If the Tk ppm provided by ActiveState is broken on Windows
	 (lacks <code>libwinpthread-1.dll</code> used by gcc 4.8.2
	 from MinGW distribution), pull it from the MinGW
	 <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.8.2/threads-posix/sjlj/">build</a>
	 and place it in the <code>site/bin</code> folder of the
	 ActiveState perl installation.
	</p>
	<h3><a name="_Toc211847763">Installing optional missing Perl modules for database support</a></h3>
	<p>
	  In order to use HaploPainter&rsquo;s capabilities to query
	  databases you must install more modules. Without these
	  modules HaploPainter will start anyway, but will produce
	  warnings when you try to use this functionality.
	</p>
<pre>&gt; ppm install DBD-PgPP
&gt; ppm install DBD-mysql
&gt; ppm install DBD-Oracle</pre>
	<h2><a name="_Toc211847764">Other operating systems</a></h2>
	<p>
	  For other operating systems it could be necessary to compile
	  libraries yourself. Field reports are welcome!
	</p>
	<h1><a name="_Toc211847765">Data import</a></h1>
	<p>
	  For data import there are &ldquo;Import Pedigree
	  &hellip;&rdquo;, &ldquo;Import Haplotypes &hellip;&rdquo;
	  and &ldquo;Import Map File &hellip;&rdquo; options available
	  from the &ldquo;File&rdquo; menu. It is the best to follow
	  this order. Don&rsquo;t be confused by the
	  &ldquo;Open&rdquo; command! That&rsquo;s for the
	  HaploPainter specific data storage. Those files become the
	  file extension &lsquo;<code>.hp</code>&rsquo; by default and
	  are not human readable.
	</p>
	<h2><a name="_Toc211847766">Import pedigrees</a></h2>
	<p>
	  There are two kinds of text input files that HaploPainter
	  accepts to define pedigree structures &ndash; LINKAGE and
	  CSV. The CSV format is designed so that the first 6 columns
	  have the same meaning as in LINKAGE format. If you start to
	  collect pedigree data in a database table, you must prepare
	  a table or view with the same structure as used by CSV
	  format. By default HaploPainter handles text data as encoded
	  in UTF-8. You can change it via File &rarr;
	  Encoding. HaploPainter deals with Unicode by looking for the
	  byte-order mark (BOM) sequence &lsquo;U+FEFF&rsquo; at the
	  beginning of documents, and uses settings only if this
	  sequence is not found. In that way it is for instance
	  possible to read Excel sheets which are saved as <i>Unicode
	  Text format</i> (UTF-16LE) although the setting in
	  HaploPainter is different. The encoding is very important
	  for saving/exporting pedigrees in CSV format. In this case
	  HaploPainter takes care of adding the BOM. (See also the
	  chapter
	  <a href="#_Toc211847782">Encoding and Unicode support</a>.)
	</p>
	<h3><a name="_Toc211847767">LINKAGE</a></h3>
	<p>
	  Well, there are actually many different LINKAGE pedigree
	  files used by statistical software. The format used here is
	  also called pre-MAKEPED LINKAGE format.
	</p>
	<h4><i><u>Example</u></i></h4>
	<figure><img border="0" width="577" height="220" src="HaploPainter_Version_1_files/image002.gif"/></figure>
<pre><u>#FAMILY PERSON     FATHER     MOTHER     GENDER AFF_STATUS</u>
2002    1210708    1210710    1210711    0      0
2002    1210701    1210710    1210711    2      1
2002    1210700    1210710    1210711    1      2
2002    1210709    1210710    1210711    1      3
2002    1210706    1210710    1210711    2      4
2002    1210705    1210710    1210711    1      5
2002    1210704    1210710    1210711    2      6
2002    1210703    1210710    1210711    2      7
2002    1210710          0          0    1      8
2002    1210711          0          0    2      9</pre>
	<p>
	  HaploPainter is tolerant in the definition of the exact
	  format. Empty lines and those beginning with the signs
	  &lsquo;<code>#</code>&rsquo;, &lsquo;<code>!</code>&rsquo;
	  &lsquo;<code>*</code>&rsquo; or &lsquo;<code>\</code>&rsquo;
	  are ignored and may be used to for comments. HaploPainter
	  tries to find out the used column delimiter by first looking
	  for semicolons, followed by tabulators and finally other
	  white space. Only lines resulting in 6 or more non-empty
	  columns are processed, and only first 6 columns will be
	  taken into account. White space at the beginning and end of
	  all values is removed.
	</p>
	<h4><b><u>LINKAGE format</u></b></h4>
	<table>
	  <tbody>
	    <tr>
	      <td><b>FAMILY</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>PERSON</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>FATHER</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>MOTHER</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>GENDER </b></td><td>not NULL, 0 or x for unknown, 1 or m for male, 2 or f for female</td>
	    </tr>
	    <tr>
	      <td><b>AFFECTION</b></td><td>not NULL, 0 or x, 1, 2, 3, 4, 5, 6, 7, 8, 9</td>
	    </tr>
	  </tbody>
	</table>
	<p>
	  As you can see, all columns must have defined values! The
	  symbols x/m/f used for gender and affection status also can
	  be in upper case. The affection status field in the
	  originally LINKAGE format only can hold the values 0, 1 and
	  2. This can be extended in HaploPainter by up to 10 possible
	  values. Every affection status is assigned a different color
	  that fills the symbols.
	</p>
	<h3><a name="_Toc211847768">CSV</a></h3>
	<p>
	  The CSV format is influenced by the LINKAGE format but
	  differs in the number of possible columns and the way it is
	  parsed. As in LINKAGE format, empty lines and those
	  beginning with the signs &lsquo;<code>#</code>&rsquo;,
	  &lsquo;<code>!</code>&rsquo; &lsquo;<code>*</code>&rsquo; or
	  &lsquo;<code>\</code>&rsquo; are ignored and may be used for
	  comments or header rows. Only a single tabulator sign is
	  allowed as column separator! The same rules as in LINKAGE
	  format apply to first 6 columns
	  (see <a href="#_Toc211847767">above</a>). Field values are
	  case insensitive as well. The figure below shows the same
	  pedigree from the sample above but extended by HaploPainter
	  specific columns. It illustrates many of
	  HaploPainter&rsquo;s additionally features like Unicode
	  support, twins, termination of pregnancy symbols, deceased,
	  adopted or consanguineous individuals.
	</p>
	<figure><img border="0" width="605" height="239" src="HaploPainter_Version_1_files/image003.gif"/></figure>
	<h4><b><u>CSV format</u></b></h4>
	<table>
	  <tbody>
	    <tr>
	      <td><b>FAMILY</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>PERSON</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>FATHER</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>MOTHER</b></td><td>not NULL</td>
	    </tr>
	    <tr>
	      <td><b>GENDER</b></td><td>not NULL, 0 or x, 1 or m, 2 or f</td>
	    </tr>
	    <tr>
	      <td><b>AFFECTION</b></td><td>not NULL, 0 or x, 1, 2, 3, 4, 5, 6, 7, 8, 9</td>
	    </tr>
	    <tr>
	      <td><b>IS_DECEASED</b></td><td>NULL or 0 or n, 1 or y</td>
	    </tr>
	    <tr>
	      <td><b>IS_SAB_OR_TOP</b></td><td>NULL or 0 or n, 1 or y</td>
	    </tr>
	    <tr>
	      <td><b>IS_PROBAND</b></td><td>NULL or 0 or n, 1 or y</td>
	    </tr>
	    <tr>
	      <td><b>IS_ADOPTED</b></td><td>NULL or 0 or n, 1 or y</td>
	    </tr>
	    <tr>
	      <td><b>ARE_TWINS</b></td><td>NULL, [m or d]_text</td>
	    </tr>
	    <tr>
	      <td><b>ARE_CONSANGUINEOUS</b></td><td>NULL, text</td>
	    </tr>
	    <tr>
	      <td><b>TEXT_INSIDE_SYMBOL</b></td><td>NULL, char(3)</td>
	    </tr>
	    <tr>
	      <td><b>TEXT_BESIDE_SYMBOL</b></td><td>NULL, text</td>
	    </tr>
	    <tr>
	      <td><b>TEXT1_BELOW_SYMBOL</b></td><td>NULL, text</td>
	    </tr>
	    <tr>
	      <td><b>TEXT2_BELOW_SYMBOL </b></td><td>NULL, text</td>
	    </tr>
	    <tr>
	      <td><b>TEXT3_BELOW_SYMBOL</b></td><td>NULL, text</td>
	    </tr>
	    <tr>
	      <td><b>TEXT4_BELOW_SYMBOL</b></td><td>NULL, text</td>
	    </tr>
	  </tbody>
	</table>
	<p>
	  <b><i>Meaning of additional fields</i></b>
	</p>
	<p>
	  <b>IS_DECEASED</b>: Set to 1, y or Y if the individual is
	  deceased. In that case a diagonal line through the symbol
	  representing that individual is drawn. This line is split
	  into two lines if a text placed in the center of the symbol.
	</p>
	<p>
	  <b>IS_SAB_OR_TOP</b>: Set to 1, y or Y if the individual
	  deceased by spontaneous abortion or termination of
	  pregnancy. The individual symbol is drawn as a triangle
	  now. Later you can define in configurations if the gender is
	  placed as text below the symbol or not.
	</p>
	<p>
	  <b>IS_PROBAND</b>: Set to 1, y or Y if the individual is
	  declared as proband. (The first affected family member
	  coming to medical attention.) This results in a
	  &lsquo;P&rsquo; sign attached to an arrow pointing to that
	  individual.
	</p>
	<p>
	  <b>IS_ADOPTED</b>: Set to 1, y or Y if the individual has
	  been adopted. The symbol for this individual is drawn in
	  brackets.
	</p>
	<p>
	  <b>ARE_TWINS</b>: Individuals sharing the same string in
	  this column are recognized as twins. The first character in
	  that string tells HaploPainter if the twins are monozygotic
	  &lsquo;m&rsquo; or dizygotic &lsquo;d&rsquo; followed by an
	  underscore followed by an unique identifier. Examples for
	  allowed strings
	  are: <code>m_1</code>, <code>d_gruppe1</code>. Twins are
	  drawn according to
	  <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC1801187/">Bennett et al. 1995</a>. A
	  twin group must contain two individuals or more.
	</p>
	<p>
	  <b>ARE_CONSANGUINEOUS</b>: Individuals sharing the same
	  string in this column are recognized as consanguineous
	  (individuals are related to each other). This only makes
	  sense if individuals have offspring. In that case a double
	  line between couples is drawn. Although HaploPainter
	  automatically detects consanguinities, for instance if it
	  find loops, you additionally can define any couple as
	  consanguineous. This is good for situations when the real
	  degree of consanguinity is unknown or you want to draw more
	  compact pedigrees. A consanguineous group must contain two
	  individuals. You also can define consanguinity in a menu.
	</p>
	<p>
	  <b>TEXT_INSIDE_SYMBOLS</b>: Place text inside symbols.
	</p>
	<p>
	  <b>TEXT_BESIDE_SYMBOL</b>: Place text left upper hand to symbols.
	</p>
	<p>
	  <b>TEXT&lt;n&gt;_BELOW_SYMBOL</b>: HaploPainter gives you
	  the opportunity to place text below symbols. By default the
	  individual identifier is one of those text lines, but you
	  can attach up to four additional text lines below. In the
	  configuration menu you can arrange the combination of
	  columns you want to show in your pedigree
	  (see <a href="#_Toc211847802">Ped &amp; Case Info</a>).
	</p>
	<h3><a name="_Toc211847769">Database</a></h3>
	<p>
	  Import of pedigree data from database tables is supported
	  &ndash; to date for MySQL, PostgreSQL and Oracle. To use
	  this feature the corresponding Perl modules must be
	  installed (only if you run HaploPainter from source file!
	  HaploPainter will work without DBD modules because they are
	  loaded at runtime but will issue warnings). For Oracle you
	  also need the Oracle client, <code>NLS_LANG</code>
	  and <code>ORACLE_HOME</code> environment variables and an
	  entry in the <code>tnsnames.ora</code> file. You access the
	  database connection window by pressing F4 or via File &rarr;
	  Import Pedigrees &hellip; &rarr; Database. For databases
	  that are located on your computer you also can put
	  &lsquo;localhost&rsquo; instead of using the host
	  name. After you successfully connect to the database, a
	  &ldquo;Choose Pedigrees&rdquo; menu will appear &ndash; here
	  is an example:
	</p>
	<p>
	  <figure style="float:left"><img border="0" width="329" height="214" src="HaploPainter_Version_1_files/image004.jpg"/></figure>
	  <figure style="float:left"><img border="0" width="133" height="216" src="HaploPainter_Version_1_files/image005.jpg"/></figure>
	</p>
	<p>
	  Inside this box all families are listed and can be marked by
	  use of the left mouse bottom in combination with the shift
	  and control (Ctrl) keys. All marked pedigrees are imported
	  after pressing &lsquo;Ok&rsquo;.
	</p>
	<p>
	  The Database Connection window has two other functions to
	  save the connection data as default (Save Default) and
	  reload them (Load Default).
	</p>
	<h2><a name="_Toc211847770">Import haplotypes</a></h2>
	<p>
	  A haplotype describes the linear sequence of alleles at
	  multiple loci in the genome that are transmitted on the same
	  chromosome. In diploid cells a genotype is composed of two
	  alleles. Commonly used methods for measurement of genotypes
	  are not able to distinguish which allele belongs to which
	  chromosome, but in many cases likely haplotypes can be
	  reconstructed through statistical methods. Haplotypes are
	  nice instruments in the interpretation of linkage
	  results. They are able to map a disease causing gene to a
	  region in the genome. HaploPainter supports four statistical
	  software packages that are popular in the calculation of
	  haplotypes: Genehunter, Allegro, Simwalk2 and
	  Merlin. Specific output files produced by this software can
	  be imported and visualized together with pedigrees. Import
	  haplotype files via File &rarr; Import Haplotypes and choose
	  the import format:
	</p>
	<table>
	  <tbody>
	    <tr>
	      <td>Genehunter</td><td>&rarr;</td><td>haplo.dump</td>
	    </tr>
	    <tr>
	      <td>SimWalk2</td><td>&rarr;</td><td>HAPLO.??? (horizontal orientation)</td>
	    </tr>
	    <tr>
	      <td>Merlin</td><td>&rarr;</td><td>merlin.chr (vertical orientation)</td>
	    </tr>
	    <tr>
	      <td>Allegro</td><td>&rarr;</td><td>haplo.out, ihaplo.out, founder.out</td>
	    </tr>
	  </tbody>
	</table>
	<p>
	  SimWalk2 controls the way it outputs haplotype results
	  through a batch file. In batch number #46 line 1 you can
	  switch between default horizontal (N) or vertical (Y) output
	  orientation. HaploPainter expects to use the default value
	  (N). Merlin also has two possible output modes. By default
	  Merlin produces files with haplotypes in vertical
	  orientation &ndash; the format that HaploPainter
	  supports. You control that in Merlin by the command line
	  parameter &lsquo;<code>--horizontal</code>&rsquo;.
	</p>
	<p>
	  Supplementary information enclosed in those output files
	  such recombination events are ignored by HaploPainter. It
	  uses the following rules for haplotype coloring.
	</p>
	<ul type="disc">
	  <li>
	    Try to find out the first marker beginning from p-telomere
	    from which the phase can be derived and then trace back
	    the haplotype with the color from that phase up to the
	    chromosomal starting point.
	  </li>
	  <li>
	    The first marker showing differences is declared as the
	    point of recombination and the color is changed to the
	    recombinant haplotype until the next recombination event
	    occurs.
	  </li>
	  <li>
	    Missing genotypes are interpreted as uninformative.
	  </li>
	  <li>
	    Other uninformative genotypes are drawn in special thin
	    blocks when set in options.
	  </li>
	</ul>
	<p>
	  After you have imported haplotypes, if you are not satisfied
	  with the colors HaploPainter have been choosing for you, you
	  can press F6 to choose all colors anew. The configuration
	  menu gives you the opportunity to manually modify colors of
	  haplotypes or fix some colors so that pressing F6 has no
	  effect for those. You also can prevent markers from being
	  shown.
	</p>
	<h3><a name="_Toc211847771">Some tips for interpreting haplotypes</a></h3>
	<p>
	  Points of recombination are often surrounded by
	  uninformative markers. Due to the way HaploPainter deals
	  with analysis results it is possible that your region of
	  interest is shown as too small or shifted. That should be
	  checked and manually corrected! To do this, just
	  double-click on alleles from those individuals. The menu
	  which appears gives you an instrument to change the phase or
	  declare markers as uninformative. You may find uninformative
	  markers by moving the mouse cursor over alleles which start
	  flashing red in that case. In general you should orientate
	  the results of your multipoint linkage. Also be distrustful
	  if you see double recombinations (two neighbored
	  recombinations). They are mostly hints for genotyping
	  errors. Some software packages tend to complete haplotypes
	  for not genotyped individuals. You never should thrust those
	  haplotypes &ndash; see them only as a suggestion.
	</p>
	<h2><a name="_Toc211847772">Import marker maps</a></h2>
	<p>
	  To replace dummy marker names which are automatically
	  created after import of haplotype data you need to import a
	  map file too. There are only two columns of interest: marker
	  name and marker position. These columns are expected to be
	  in columns 2 and 3 of the input files. The expected column
	  separator is white space. As in LINKAGE format, empty lines
	  and those beginning with the signs
	  &lsquo;<code>#</code>&rsquo;, &lsquo;<code>!</code>&rsquo;,
	  &lsquo;<code>*</code>&rsquo; or &lsquo;<code>\</code>&rsquo;
	  are ignored and may be used for comments or header
	  rows. There are two options for map files concerning the
	  column positions:
	</p>
	<table>
	  <tbody>
	    <tr>
	      <td>Chromosome</td><td>Marker Name</td><td>Marker Position</td><td>(CHR-POS-MARKER)</td>
	    </tr>
	    <tr>
	      <td>Chromosome</td><td>Marker Position</td><td>Marker Name</td><td>(CHR-MARKER-POS)</td>
	    </tr>
	  </tbody>
	</table>
	<p>
	  As you can see, the only difference is a switch between
	  columns 2 and 3.
	</p>
	<p>
	  A map file can be loaded as specific for a family or for all
	  families. This depends on the setting of the &lsquo;Global
	  map import&rsquo; flag in the File menu. This flag is off by
	  default, in other words, an imported map file only belongs
	  to the currently drawn family.
	</p>
	<h1><a name="_Toc211847773">Data export and publishing tips</a></h1>
	<p>
	  Since version 1.0, HaploPainter uses Cairo, Pango and GTK+
	  internally for rendering exported graphics. If you use the
	  standalone version you don&rsquo;t need additional programs
	  to convert images into other formats. Only if you plan to
	  run HaploPainter in your own Perl environment you have to
	  take care of that
	  (see <a href="#_Toc211847758">Installation</a> part). Within
	  HaploPainter there are different formats available
	  in <b>vector graphics</b> (PostScript, PDF, SVG), <b>bitmap
	  graphics</b> (to date only PNG) and <b>flat file</b>
	  (CSV). Keep in mind, that images produced by HaploPainter
	  will cover the RGB color space. If you plan to use the
	  produced images for the web this doesn&rsquo;t matter but if
	  not you must take care of this. Some journals like to have
	  graphic in CMYK colors, and probably you don&rsquo;t have
	  much experience with transformations from RGB to
	  CMYK. Unfortunately this is not as easy as you might think,
	  because you must choose the right color profile that should
	  be used for transformation of color spaces. It is not
	  possible to describe every RGB color in CMYK. Furthermore,
	  the end result and color impressions depend of the
	  calibration of your monitor the used paper and other
	  printing dependent stuff. So, whenever possible let the
	  journal do this job for you or ask them which profiles give
	  the best results. In case you want to do it yourself, you
	  should take a look at Adobe Acrobat and Adobe Photoshop. It
	  also is helpful to print the image on a CMYK color laser
	  printer to have a rough idea about the color conversion
	  effect. Many journals prefer TIFF images with embedded ICC
	  profiles and color resolution greater 300 dpi. Sending
	  images in other vector graphics formats, which are accepted
	  (like Adobe Illustrator/AI, EPS, PS, PDF, CorelDRAW/CDR,
	  FreeHand/FH) would be of advantage (at least for you) as the
	  layout and printer professionals could transform the drawing
	  to the best resolution and colors herself. Those images send
	  by you also are much smaller in size.
	</p>
	<h2><a name="_Toc211847774">Vector graphics</a></h2>
	<p>
	  Vector graphics describe drawing elements as a mathematical
	  formula. The main advantage is its scalability &ndash; you
	  can create every possible image resolution you want! The
	  other advantage is that you can edit images with common
	  desktop publishing software.
	</p>
	<h3><a name="_Toc211847775">SVG</a></h3>
	<p>
	  <b>S</b>calable <b>V</b>ector <b>G</b>raphics is based on
	  XML and has been developed as open standard from the World
	  Wide Web Consortium (W3C) since 1999. Since that time most
	  modern web browsers integrated native support (Firefox,
	  Opera, Safari, Chrome). It seems that Adobe and Microsoft
	  try to subvert this standard, because Adobe as most known
	  provider for SVG browser plug-ins lost their interest to
	  give further support after buying Macromedia and Microsoft
	  itself interferes with its own proprietary vector graphics
	  format VML (which again is ignored by other
	  browsers). However, SVG is a good choice if you plan to
	  integrate images into web pages. Probably Microsoft&rsquo;s
	  Internet Explorer will support SVG sometimes if the SVG
	  diffusion rate increases over the web. You can import SVG
	  into a plenty of desktop publishing software like the freely
	  available <a href="http://www.inkscape.org/">Inkscape</a>.
	</p>
	<h3><a name="_Toc211847776">PostScript</a></h3>
	<p>
	  Adobe PostScript is something like a program language for
	  printers. Most printers today are equipped with PostScript
	  interpreters &ndash; so you may use PostScript to produce
	  high quality printer jobs. Programs like
	  <a href="http://pages.cs.wisc.edu/~ghost/gsview/index.htm">Ghostview/Ghostscript</a>
	  are able to view them or convert PostScript into PDF, EPS or
	  other graphic formats.
	</p>
	<h3><a name="_Toc211847777">PDF</a></h3>
	<p>
	  PDF (developed by Adobe, now
	  <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=51502">adopted by ISO</a>)
	  is the standard for platform independent document
	  exchange. The format is very compact and viewers for every
	  platform are freely available &ndash; so my recommendation
	  is to use this format whenever possible.
	</p>
	<h2><a name="_Toc211847778">Bitmap graphics</a></h2>
	<h3><a name="_Toc211847779">PNG</a></h3>
	<p>
	  PNG is a good choice for displaying bitmap graphics,
	  particularly in web browsers. The format is free for use,
	  has better performance then GIF and even Microsoft&rsquo;s
	  Internet Explorer will show it &hellip;
	</p>
	<h2><a name="_Toc211847780">Flat file</a></h2>
	<h3><a name="_Toc211847781">CSV</a></h3>
	<p>
	  Exported CSV format is identical with the imported
	  counterpart. So you may import files in LINKAGE format, make
	  your modifications within the GUI and export it as extended
	  CSV/tab delimited version. This also would be an easy way to
	  produce templates for other pedigrees.
	</p>
	<h1><a name="_Toc211847782">Encoding and Unicode support</a></h1>
	<p>
	  Since HaploPainter version 1.0 reading and writing files in
	  Unicode is supported. There are a lot of Unicode encodings,
	  but UTF-8 and UTF-16LE seem to be the most relevant to
	  date. UTF-8 is the most common
	  type, <a href="http://en.wikipedia.org/wiki/UTF-8">dominating
	  the web</a>. So why UTF-16LE? The answer is Microsoft
	  Excel. Using Excel to create CSV files ready for import into
	  HaploPainter is a good idea! Although most text editors
	  would do their job well, handling of tables in Excel is
	  quite comfortable. If you plan to work with strange
	  characters (for you they are surely not strange) you must
	  save data in Excel using Unicode Text format and this is in
	  fact UTF-16LE. The encoding type setting is located inside
	  the file menu. There are three kinds available: ASCII, UTF-8
	  and UTF-16LE &ndash; the default being UTF-8.
	</p>
	<p>
	  May be you wondered about the checkbox &ldquo;Write
	  BOM&rdquo; available from the File menu. This is the special
	  Unicode character &lsquo;U+FEFF&rsquo; (byte-order mark)
	  represented by a series of 2-4 bytes used as marker to
	  indicate the encoding type. I don&rsquo;t want to comment
	  the actual discussion if this is good or not!
	  HaploPainter&rsquo;s default is to write a BOM sequence for
	  Unicode files &ndash; and you can switch it off, if you
	  want! HaploPainter is able to read Unicode files which are
	  encoded in ASCII, UTF-8, UTF-16LE, UTF-16BE, UTF-32LE and
	  UTF-32BE. If a BOM sequence is found, HaploPainter uses it
	  &ndash; whatever encoding type is preset.
	</p>
	<h1><a name="_Toc211847783">Working with pedigrees</a></h1>
	<h2><a name="_Toc211847784">Navigation</a></h2>
	<p>
	  Once you imported the pedigrees, haplotypes and mapping data
	  some functions to navigate through the pedigrees are
	  available in for instance the navigation menu.
	</p>
	<figure>
	  <img border="0" width="177" height="32" src="HaploPainter_Version_1_files/image006.jpg"/>
	  <figcaption>The navigation menu</figcaption>
	</figure>
	<p>
	  The arrow symbol is activated by default. In this mode you
	  can activate symbols ether by clicking single symbols or
	  clicking the mouse button while moving. This forces
	  HaploPainter to draw a rectangle with dashed line. Every
	  symbol inside this rectangle is activated as indicated by a
	  change of its color to red. Now you can move symbols around
	  by drag and drop. Note that you must place symbols at
	  positions that are not occupied by other symbols. Those
	  symbols will not be moved! Zooming in or out the drawing is
	  available in different ways &ndash; via plus/minus
	  navigation menu symbol, plus/minus keys, Edit menu and
	  context menu. Use the hand symbol to shift the drawing by
	  clicking the mouse button to have a fixed point while moving
	  the mouse. In case of many imported pedigrees you can change
	  the current pedigree by clicking the green left/right arrows
	  (resulting in a change to next or previous pedigree) or
	  alternatively use the View &rarr; Draw Pedigree menu. This
	  menu also is able to separate from the main menu for easy
	  navigation through the pedigrees. Two other useful functions
	  to center or fit the pedigree into the current window
	  &ndash; Center View/Fit View are accessible from the Edit
	  and context menu.
	</p>
	<h3><a name="_Toc21184778a">Redrawing pedigrees</a></h3>
	<p>
	  Most modifications you made during a pedigree life will be
	  conserved until you do some of the following things:
	</p>
	<ul>
	  <li>use the Redraw Ped (F5) function</li>
	  <li>make changes in the way how loops are broken</li>
	  <li>make changes in the Inter symbol distance value from the Configuration/Ped Style menu</li>
	  <li>extend pedigrees with the GUI functions</li>
	</ul>
	<p>
	  Redrawing a pedigree will force HaploPainter to draw the
	  pedigree according to the settings of the Options
	  &rarr; <i>Sort by SID</i> and <i>Sort couples by gender</i>
	  flag. If the <i>Sort couples by gender</i> flag is not set,
	  the individuals belonging to a couple group are assembled
	  randomly. If the flag is set, the <b>male individuals are
	  placed first</b>! That&rsquo;s the only difference. The
	  second modifier in respect of drawing order &ndash; <i>Sort
	  by SID</i> &ndash; reflects the handling of sibling
	  groups. By default the order of siblings is random. If the
	  flag <i>Sort by SID</i> is set HaploPainter will change the
	  drawing order of the members of a sibling group and applies
	  a special name sorting mechanism (<code>nsort</code> from
	  the module <code>Sort::Naturally</code>). The algorithm
	  works in a way human normally would think about sort and is
	  an intelligent combination of numerical and lexical sort. By
	  using both flags you can force HaploPainter to draw
	  pedigrees in a determined way taking individual naming into
	  account.
	</p>
	<h3><a name="_Toc21184778b">Changing individual settings</a></h3>
	<p>
	  If you <i>double-click on a symbol</i>, the following menu
	  will appear that allows you to change individual settings
	  and displays some useful information.
	</p>
	<p>
	  <figure style="float:left">
	    <img border="0" width="296" height="376" src="HaploPainter_Version_1_files/image007.jpg"/>
	    <figcaption>Change individual settings by double-click on symbols</figcaption>
	  </figure>
	  <figure style="float:left">
	    <img border="0" width="271" height="335" src="HaploPainter_Version_1_files/image008.jpg"/>
	    <figcaption>Examples of symbols</figcaption>
	  </figure>
	</p>
	<table style="width:474pt">
	  <col style="width:114pt"/>
	  <col style="width:360pt"/>
	  <tbody>
	    <tr>
	      <td><i>Affection</i></td>
	      <td>
		A numerical value ranging from 0-9. Dependent of the
		settings in Options menu &rarr; Ped Color the symbol
		is filled with that color
	      </td>
	    </tr>
	    <tr>
	      <td><i>Male</i></td>
	      <td>
		Males are drawn as squares
	      </td>
	    </tr>
	    <tr>
	      <td><i>Female</i></td>
	      <td>
		Females are drawn as circles
	      </td>
	    </tr>
	    <tr>
	      <td><i>Unknown</i></td>
	      <td>
		Individuals with unknown gender are drawn as diamonds
	      </td>
	    </tr>
	    <tr>
	      <td><i>Adopted</i></td>
	      <td>
		Adopted individuals are drawn with brackets around the
		symbol
	      </td>
	    </tr>
	    <tr>
	      <td><i>Deceased</i></td>
	      <td>
		Deceased individuals are drawn with a diagonal line
		through the individual. The line is divided in case of
		text inside symbols
	      </td>
	    </tr>
	    <tr>
	      <td><i>TOP</i></td>
	      <td>
		<b>T</b>ermination <b>o</b>f <b>p</b>regnancy and
		aborts are drawn as triangle symbol. The gender is
		displayed as a letter (m/f) below the symbol
	      </td>
	    </tr>
	    <tr>
	      <td><i>Proband</i></td>
	      <td>
		Attaches an arrow with the letter P left of the symbol
		and is used to indicate persons that primarily came to
		medical attention
	      </td>
	    </tr>
	    <tr>
	      <td><i>Text inside symbol</i></td>
	      <td>
		Places text in the middle of symbols
	      </td>
	    </tr>
	    <tr>
	      <td><i>Text beside symbol</i></td>
	      <td>
		Places text at the left upper corner of symbols
	      </td>
	    </tr>
	    <tr>
	      <td><i>Case Info #1</i></td>
	      <td>
		This is an individual identifier placed below
		symbols. It is not allowed to duplicate this name. The
		Show checkbox to the left of this field controls the
		display for all individuals
	      </td>
	    </tr>
	    <tr>
	      <td><i>Case Info #2-5</i></td>
	      <td>
		You may put further information text lines below
		symbols by using these fields. The Show checkbox to
		the left of this field controls the display for all
		individuals. You can fine tune the settings for Case
		Info from the Options menu &rarr; Ped &amp; Case Info
	      </td>
	    </tr>
	  </tbody>
	</table>
	<h2><a name="_Toc211847785">Building and extending pedigrees with the graphical user interface</a></h2>
	<p>
	  The functions to create new or modify existing pedigrees are
	  available from the Edit or context menu (see example below).
	</p>
	<figure>
	  <img border="0" width="199" height="298" src="HaploPainter_Version_1_files/image009.jpg"/>
	  <figcaption>The context menu</figcaption>
	</figure>
	<h3><a name="_Toc211847786">New pedigrees</a></h3>
	<p>
	  To create a new pedigree you also can press the key
	  combination &ldquo;Ctrl+N&rdquo;. A window will appear that
	  asks for a pedigree name. After saying &ldquo;Ok&rdquo;
	  HaploPainter draws a core family consisting of a couple and
	  one offspring with predefined individual identifiers. To
	  change the identifiers, gender or other individual settings
	  double-click on the respective symbol.
	</p>
	<h3><a name="_Toc211847787">Delete individuals</a></h3>
	<p>
	  To delete individuals, mark one or more symbols and choose
	  the &ldquo;Delete Individuals&rdquo; function. You also can
	  do this by pressing the keys &ldquo;Ctrl+D&rdquo; or
	  &ldquo;Del&rdquo;. Remaining childless founders will be
	  automatically deleted too!
	</p>
	<h3><a name="_Toc211847788">Add siblings</a></h3>
	<p>
	  To add up to 8 siblings, mark an individual and select the
	  &ldquo;Add Sibling&rdquo; function. A window will appear
	  that asks for sibling identifiers and gender. After
	  &ldquo;Ok&rdquo; is pressed, HaploPainter attaches all
	  siblings for which you entered a valid identifier to the
	  pedigree. To change the identifiers, gender or other
	  individual settings double-click on the respective symbol.
	</p>
	<h3><a name="_Toc211847789">Add parents</a></h3>
	<p>
	  Parents can be added only to founder individuals. Mark the
	  founder and select the &ldquo;Add Parents&rdquo; function.
	  A window will appear that asks for the mother and father
	  identifiers. After &ldquo;Ok&rdquo; is pressed, HaploPainter
	  attaches a new founder couple to the pedigree. To change the
	  identifiers or other individual settings double-click on the
	  respective symbol.
	</p>
	<h3><a name="_Toc211847790">Add mate &amp; offspring</a></h3>
	<p>
	  You can attach a new mate and offspring to any
	  individual. Mark an individual and select the &ldquo;Add
	  Mate &amp; Offspring&rdquo; function. A window will appear
	  that asks for the mate and offspring identifiers. After
	  &ldquo;Ok&rdquo; is pressed, HaploPainter attaches a new
	  founder (only if that mate does not already exist) and a new
	  offspring with unknown gender to the pedigree. To change the
	  identifiers, gender or other individual settings
	  double-click on the respective symbol.
	</p>
	<h3><a name="_Toc211847791">Consanguinity settings</a></h3>
	<p>
	  Consanguineous individuals are automatically detected if the
	  pedigree contains loops. However, you can declare any couple
	  as consanguineous too. The function to change consanguinity
	  for all couples at once can be found in the Options and
	  context menu &rarr; Consanguinity Settings. A new window
	  displaying all couples will appear. Here you can mark any
	  combination of entries, preview the changes and permanently
	  change the new setting by pressing &ldquo;Ok&rdquo;.
	</p>
	<figure>
	  <img border="0" width="299" height="344" src="HaploPainter_Version_1_files/image010.jpg"/>
	  <figcaption>Consanguinity Setting menu</figcaption>
	</figure>
	<p>
	  The other way to quickly change the setting is to mark the
	  two symbols of one couple and choose &ldquo;Set/Unset
	  Consanguinity&rdquo; from the context menu or Edit menu.
	</p>
	<h3><a name="_Toc211847792">Twin setting</a></h3>
	<p>
	  To declare/undeclare two or more individuals as twins mark
	  the symbols of a sibling group and choose &ldquo;Set/Unset
	  Twins&rdquo; from the context menu or Edit menu. A new
	  submenu gives you the opportunity to mark twins either to be
	  monozygotic or dizygotic. The differences are shown in the
	  following figure where the individuals 3+4 and 5+6+7 are
	  declared as monozygotic twins and the other twin groups as
	  dizygotic.
	</p>
	<figure><img border="0" width="604" height="150" src="HaploPainter_Version_1_files/image011.gif"/></figure>
	<p>
	  In the example above the
	  &ldquo;<b>Inter sibling Y distance</b>&rdquo; parameter
	  from the Configuration &rarr; Ped Style menu was increased
	  to a value of 45 to better separate the twin groups from the
	  horizontal sibling connecting line. This value is set per
	  default to a lower value to have more space for haplotypes
	  and case information.
	</p>
	<h3><a name="_Toc211847793">Loop breaking</a></h3>
	<p>
	  With respect to finding a good drawing solution, loops are
	  the major challenge! Breaking a loop can be the only way to
	  draw the pedigree without line crosses. Loops are broken by
	  a duplication of an individual that is located and the
	  &ldquo;end&rdquo; node of a loop.
	</p>
	<p>
	  <figure style="float:left"><img width="192" height="190" src="HaploPainter_Version_1_files/image012.gif"/></figure>
	  Due to HaploPainter&rsquo;s internal algorithms some loops
	  are always broken, for instance the pedigree on the left
	  that belongs to the category parent-offspring mate
	  situation.
	</p>
	<p>
	  <figure style="float:left"><img width="136" height="186" src="HaploPainter_Version_1_files/image013.gif"/></figure>
	  On the other hand there are situations when breaking of
	  loops makes no sense &ndash; like the offspring mating
	  situation shown on the left. Those unproblematic loops would
	  not lead to line crossings and therefore will never be
	  broken or selectable for breaking.
	</p>
	<p>
	  The more loops a pedigree contains, the more time it takes
	  to find a good drawing solution. For this reason
	  HaploPainter breaks loops automatically when it finds more
	  then 3 of them. Later you can decide which loops should be
	  broken or not. To select them there is a &ldquo;Breaking
	  loops &hellip;&rdquo; window, available from the Options or
	  context menu. The following figures show the test pedigree
	  hp_19 which contains 3 loops. After you select the
	  &ldquo;Breaking loops &hellip;&rdquo; function a new window
	  appears that gives you the possibilities to choose either
	  select breaking no loops, all loops or to manually select
	  loops for breaking. Here it was selected to manually break
	  the loop ending with the individuals 8==9.
	</p>
	<p>
	  <figure style="float:left">
	    <img border="0" width="349" height="257" src="HaploPainter_Version_1_files/image014.jpg"/>
	    <figcaption>Loop breaking selection window</figcaption>
	  </figure>
	  <figure style="float:left">
	    <img border="0" width="222" height="245" src="HaploPainter_Version_1_files/image015.gif"/>
	    <figcaption>Result of breaking the loop: 8==9</figcaption>
	  </figure>
	</p>
	<h3><a name="_Toc211847794">Clear families</a></h3>
	<p>
	  There are two functions to completely remove the currently
	  drawn (&lsquo;Clear current&rsquo;) and all families
	  (&lsquo;Clear all&rsquo;) from HaploPainter. They are
	  available from the File menu.
	</p>
	<h1><a name="_Toc211847795">The configuration menu</a></h1>
	<p>
	  The configuration menu is the most important place to modify
	  the way haplotypes are drawn and the drawing style of
	  pedigrees. To illustrate the effects of all parameters would
	  be a hard job! A practical way to find out what a parameter
	  really does would be to change one parameter and <b>press
	  the preview button to see what happens!</b> You start the
	  menu either from the Options or context menu. The
	  configuration menu consists of 7 tabs.
	</p>
	<p>
	  <b>IMPORTANT</b>: any changes in the settings will only
	  affect the currently drawn pedigree!
	</p>
	<h2><a name="_Toc211847796">Hap style</a></h2>
	<p>
	  The settings in this menu will mainly affect the haplotype
	  drawing style. Parameters collected there have quantitative
	  values and are changed via scroll bars.
	</p>
	<figure style="float:left"><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image016.jpg"/></figure>
	<table style="width:474pt">
	  <col style="width:159pt"/>
	  <col style="width:315pt"/>
	  <tbody>
	    <tr>
	      <td>Bar width</td>
	      <td>Size of haplotype bars in X-dimension</td>
	    </tr>
	    <tr>
	      <td>Bar width uninformative</td>
	      <td>Size of bars from uninformative alleles in X-dimension</td>
	    </tr>
	    <tr>
	      <td>Space between bars</td>
	      <td>Space between maternal and paternal haplotype from one person</td>
	    </tr>
	    <tr>
	      <td>Line width</td>
	      <td>Bar border line width, makes sense without &lsquo;fill out bars&rsquo; option</td>
	    </tr>
	    <tr>
	      <td>Legend distance left</td>
	      <td>Distance between left marker legend and pedigree</td>
	    </tr>
	    <tr>
	      <td>Allele distance</td>
	      <td>Space between alleles in Y-dimension</td>
	    </tr>
	    <tr>
	      <td>Marker position distance</td>
	      <td>Distance between left marker legend and pedigree</td>
	    </tr>
	    <tr>
	      <td>Allele position distance</td>
	      <td>Distance between alleles and bars in X-dimension</td>
	    </tr>
	    <tr>
	      <td>Width of bounding box</td>
	      <td>Effects bounding boxes of marked haplotype blocks</td>
	    </tr>
	    <tr>
	      <td>Legend distance right</td>
	      <td>Distance between right marker legend and pedigree</td>
	    </tr>
	  </tbody>
	</table>
	<h2><a name="_Toc211847797">Hap show</a></h2>
	<p>
	  The settings in this menu also will mainly affect the
	  haplotype and legend drawing style. Parameters collected
	  here have qualitative aspects and are changed via
	  checkboxes.
	</p>
	<figure style="float:left"><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image017.jpg"/></figure>
	<table>
	  <tbody>
	    <tr>
	      <td>Show alleles</td>
	      <td>Set if allele numbers are shown</td>
	    </tr>
	    <tr>
	      <td>Show Bars</td>
	      <td>Set if haplotype bars are shown</td>
	    </tr>
	    <tr>
	      <td>Show marker positions</td>
	      <td>Show marker coordinates on the left side of each generation</td>
	    </tr>
	    <tr>
	      <td>Show marker names</td>
	      <td>Show marker names on the left side of each generation</td>
	    </tr>
	    <tr>
	      <td>Show question mark</td>
	      <td>Show question mark inside person symbols for unknown affection status</td>
	    </tr>
	    <tr>
	      <td>Fill out bars</td>
	      <td>Fill out bars at given color</td>
	    </tr>
	    <tr>
	      <td>Show completely lost haplotypes</td>
	      <td>Mark haplotypes without information</td>
	    </tr>
	    <tr>
	      <td>Show other lost genotypes</td>
	      <td>Mark unique lost genotypes</td>
	    </tr>
	    <tr>
	      <td>Show user defined non-informative</td>
	      <td>Mark manually, as not informative declared genotypes</td>
	    </tr>
	    <tr>
	      <td>Show other non-informative</td>
	      <td>Mark genotyped but uninformative genotypes</td>
	    </tr>
	    <tr>
	      <td>Draw each allele as separate bar</td>
	      <td>Useful only when &lsquo;Fill out bars&rsquo; option is not set</td>
	    </tr>
	    <tr>
	      <td>Show legend left</td>
	      <td>Show the left haplotype marker legend</td>
	    </tr>
	    <tr>
	      <td>Show legend right</td>
	      <td>Show the right haplotype marker legend</td>
	    </tr>
	  </tbody>
	</table>
	<h2><a name="_Toc211847798">Hap color &amp; font</a></h2>
	<p>
	  In this menu you can change the colors and font attributes
	  of different types of information content like alleles from
	  haplotypes, case information, pedigree header or phase
	  unknown color. If you want to show all haplotypes, except of
	  one in a unique color, press the &lsquo;Color of all
	  haplotypes&rsquo; button. Before you do so, you should
	  anchor one or more haplotypes of course! To do that choose
	  the founder from whom the haplotype derives in the browse
	  entry box and activate &lsquo;Anchor paternal/maternal
	  haplotype&rsquo; in the checkbox. You also can fade out
	  haplotypes by activation of &lsquo;Hide
	  paternal/maternal&rsquo; checkboxes.
	</p>
	<figure style="float:left"><img border="0" width="408" height="331" src="HaploPainter_Version_1_files/image018.jpg"/></figure>
	<figure style="float:left"><img border="0" width="176" height="159" src="HaploPainter_Version_1_files/image019.jpg"/></figure>
	<h2><a name="_Toc211847799">Hap region</a></h2>
	<p>
	  The list box on the left side shows marker positions and
	  names. Only red marked markers will be shown. To
	  select/unselect multiple markers keep Ctrl key pressed while
	  clicking with the left mouse button over rows. Press
	  &ldquo;Ctrl+A&rdquo; to select all markers.
	</p>
	<p>
	  The list box on the right side allows drawing of black
	  unfilled boxes around markers. You can define as many boxes
	  as you want for any individual which has to be selected with
	  the browse entry field above.
	</p>
	<figure><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image020.jpg"/></figure>
	<h2><a name="_Toc211847800">Ped style</a></h2>
	<p>
	  The settings in this menu will mainly affect the pedigree
	  drawing style. Parameters collected there have quantitative
	  values and are changed via scroll bars.
	</p>
	<figure style="float:left"><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image021.jpg"/></figure>
	<table style="width:474pt">
	  <col style="width:154pt"/>
	  <col style="width:320pt"/>
	  <tbody>
	    <tr>
	      <td>Cross factor</td>
	      <td>Affects the lines connecting parents with their offspring group</td>
	    </tr>
	    <tr>
	      <td>Deceased line length</td>
	      <td>Size of the diagonal line indicating that individual is deceased</td>
	    </tr>
	    <tr>
	      <td>Grid X space</td>
	      <td>Width of grid raster in X-dimension</td>
	    </tr>
	    <tr>
	      <td>Grid Y space</td>
	      <td>Width of grid raster in Y-dimension</td>
	    </tr>
	    <tr>
	      <td>Consanguinity line distance</td>
	      <td>Distance between the two lines indicating that individuals are consanguineous</td>
	    </tr>
	    <tr>
	      <td>Intersib Y distance</td>
	      <td>Affects the lines connecting members of an offspring group with each other</td>
	    </tr>
	    <tr>
	      <td>Symbol size</td>
	      <td>Symbol size</td>
	    </tr>
	    <tr>
	      <td>Symbol outer line width</td>
	      <td>Width of the outer line of symbols if it is shown</td>
	    </tr>
	    <tr>
	      <td>Line width</td>
	      <td>Width of symbols connecting lines</td>
	    </tr>
	    <tr>
	      <td>Inter symbol distance</td>
	      <td>Number of grid units that are placed between symbols in X-dimension</td>
	    </tr>
	    <tr>
	      <td>Intergeneration distance</td>
	      <td>Number of grid units that are placed between symbols in Y-dimension</td>
	    </tr>
	    <tr>
	      <td>Haplo extra space</td>
	      <td>
		Fine tuning of the length of haplotype bars. It only
		works for haplotypes that are drawn without alleles
		and legends when bars are compressed/elongated to the
		available space according to the inter generation
		distance.
	      </td>
	    </tr>
	  </tbody>
	</table>
	<h2><a name="_Toc211847801">Ped color</a></h2>
	<p>
	  The Ped Color submenu allows changes for the most color
	  relevant parameters.
	</p>
	<figure style="float:left"><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image022.jpg"/></figure>
	<table style="width:474pt">
	  <col style="width:136pt"/>
	  <col style="width:338pt"/>
	  <tbody>
	    <tr>
	      <td>Affection colors #0-9</td>
	      <td>
		Symbols are filled with colors according to their
		affection status value ranging from 0-9
	      </td>
	    </tr>
	    <tr>
	      <td>Line color</td>
	      <td>The color of lines that connect symbols with each other</td>
	    </tr>
	    <tr>
	      <td>Symbol line color</td>
	      <td>
		The color of outer lines of symbols. The checkbox
		&ldquo;Set for affected&rdquo; right hand of the
		button controls if this line is visible for
		individuals with affection status other then 1
	      </td>
	    </tr>
	    <tr>
	      <td>Proband arrow color</td>
	      <td>The color of the proband arrow</td>
	    </tr>
	    <tr>
	      <td>Background color</td>
	      <td>
		Set the background color. It is only exported into
		other graphic formats if the Export background
		checkbox flag is switched on
	      </td>
	    </tr>
	  </tbody>
	</table>
	<h2><a name="_Toc211847802">Ped &amp; case info</a></h2>
	<p>
	  In this menu there are settings for the title and case
	  information. The rows from case 1-5 are shown below symbols
	  if the checkbox is on. Furthermore you can choose in which
	  order the fields are drawn.
	</p>
	<figure><img border="0" width="534" height="433" src="HaploPainter_Version_1_files/image023.jpg"/></figure>
	<h1><a name="_Toc211847803">Page settings</a></h1>
	<p>
	  The page settings are mostly relevant for exporting
	  pedigrees as images. The graphic resolution is very
	  important for the PNG bitmap format. For vector graphics
	  format, this parameter is handled in different ways. SVG
	  graphics uses it to define the scaling factor to which the
	  graphics should be expanded. PostScript has a default
	  resolution of 72 dpi. HaploPainter tries to extend the
	  pedigrees according to the Margin, Paper Size and Paper
	  Orientation settings. This may not be what you want and
	  cutting the image with other software is necessary.
	</p>
	<figure><img border="0" width="307" height="265" src="HaploPainter_Version_1_files/image024.jpg"/></figure>
	<h1><a name="_Toc211847804">Show grid</a></h1>
	<p>
	  The grid is visible only in the graphical user interface. It
	  is never exported into images! The grid (visible or not) is
	  internally used as an anchor point for the positioning of
	  symbols. The configuration parameters Grid X space and Grid
	  Y space affect the size of it.
	</p>
	<p>
	  You can switch it on/off by the checkbox from the File menu
	  or context menu.
	</p>
	<h1><a name="_Toc211847805">Storing and restoring defaults</a></h1>
	<p>
	  There is no special file format for storing of your favorite
	  default parameters &ndash; instead HaploPainter is able to
	  extract drawing style features from every regularly stored
	  file in HAPLOPAINTER format! One way to go is to prepare a
	  HAPLOPAINTER file with some small families and modify/store
	  them. Now you can attach the default parameters from a
	  certain family from that file to others by choosing the Open
	  default function from the File menu.
	</p>
	<figure><img border="0" width="338" height="98" src="HaploPainter_Version_1_files/image025.jpg"/></figure>
	<p>
	  A window will appear asking you for a family and if you want
	  to import the parameters from that family only to the
	  current drawn family or to all families.
	</p>
	<h1><a name="_Toc211847806">Command line mode</a></h1>
	<p>
	  HaploPainter can run in a command line mode without using of
	  the graphical interface. The first argument must
	  be <code>-b</code> to tell HaploPainter being in command
	  line (<b>b</b>atch) mode or <code>-h</code> to output a list
	  of supported parameters.
	</p>
	<p>
	  All following parameters have to be in a key &ndash; value
	  manner. Allowed keys, their meaning and allowed values
	  illustrates the following table.
	</p>
	<table style="width:474pt">
	  <col style="width:108pt"/>
	  <col style="width:366pt"/>
	  <tbody>
	    <tr>
	      <td><code>-pedfile</code></td>
	      <td>Name of the imported pedigree file in ASCII or UTF-8 format</td>
	    </tr>
	    <tr>
	      <td><code>-pedformat</code></td>
	      <td>Format of the imported pedigree file <code>[linkage, csv]</code></td>
	    </tr>
	    <tr>
	      <td><code>-outfile</code></td>
	      <td>Name of the exported file</td>
	    </tr>
	    <tr>
	      <td><code>-outformat</code></td>
	      <td>Format of the exported file <code>[ps, pdf, svg, png]</code></td>
	    </tr>
	    <tr>
	      <td><code>-hapfile</code></td>
	      <td>Name of the imported haplotype file</td>
	    </tr>
	    <tr>
	      <td><code>-hapformat</code></td>
	      <td>
		Format of the imported haplotype file<br/>
		<code>[allegro, genehunter, merlin, simwalk]</code>
	      </td>
	    </tr>
	    <tr>
	      <td><code>-mapfile</code></td>
	      <td>Name of the imported map file</td>
	    </tr>
	    <tr>
	      <td><code>-mapformat</code></td>
	      <td>Format of the imported map file <code>[1, 2]</code></td>
	    </tr>
	    <tr>
	      <td><code>-family</code></td>
	      <td>Name of one family identifier from the pedigree file</td>
	    </tr>
	    <tr>
	      <td><code>-resolution</code></td>
	      <td>Image resolution in pixels (max 4800)</td>
	    </tr>
	    <tr>
	      <td><code>-paper</code></td>
	      <td>Paper format <code>[A0-A5, B4, B5, Letter, Ledger, Legal, 11x17]</code></td>
	    </tr>
	    <tr>
	      <td><code>-orientation</code></td>
	      <td>Paper orientation <code>[landscape, portrait]</code></td>
	    </tr>
	    <tr>
	      <td><code>-border</code></td>
	      <td>Margin around the image in pixels (max 999)</td>
	    </tr>
	    <tr>
	      <td><code>-bgcolor</code></td>
	      <td>Background color in hex notation (e.g. #ffcc00)</td>
	    </tr>
	    <tr>
	      <td><code>-dbtype</code></td>
	      <td>Database type <code>[oracle, postgresql, mysql]</code></td>
	    </tr>
	    <tr>
	      <td><code>-dbport</code></td>
	      <td>Database port</td>
	    </tr>
	    <tr>
	      <td><code>-dbsid</code></td>
	      <td>Database name/SID</td>
	    </tr>
	    <tr>
	      <td><code>-dbhost</code></td>
	      <td>Database server host name (localhost is valid)</td>
	    </tr>
	    <tr>
	      <td><code>-dbtable</code></td>
	      <td>Database table/relation name</td>
	    </tr>
	    <tr>
	      <td><code>-dbuname</code></td>
	      <td>Database user/login name</td>
	    </tr>
	    <tr>
	      <td><code>-dbpasswd</code></td>
	      <td>Database password</td>
	    </tr>
	    <tr>
	      <td><code>-breakloop</code></td>
	      <td>Controls loop breaking <code>[0=No loop break, 2=Break all loops]</code></td>
	    </tr>
	    <tr>
	      <td><code>-sortbyid</code></td>
	      <td>Drawing order of individuals is sorted by ID</td>
	    </tr>
	    <tr>
	      <td><code>-sortbygender</code></td>
	      <td>Drawing order of couples is sorted by gender</td>
	    </tr>
	    <tr>
	      <td><code>-h</code></td>
	      <td>Displaying a list of supported parameters</td>
	    </tr>
	  </tbody>
	</table>
      </div>
      <div id="footer">
	<table>
	  <tr>
	    <td></td>
	    <td>September 2008 &copy;</td>
	    <td><div align="right"><a href="http://sourceforge.net" target="_blank"><img src="http://sourceforge.net/sflogo.php?group_id=111945&amp;type=3" width="95" height="20"/></a></div></td>
	  </tr>
	</table>
      </div>
    </div>
  </body>
</html>
